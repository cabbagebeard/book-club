<% @title = @club.name + " Settings" %>
<div class="container">
    <div id="club_admin">
        <% if @club.memberships.find_by_user_id(current_user.id).admin == false then %>
        
            <p>You are not an admin of this book club.</p>
            <%= link_to "Go back to club page", @club %>
            
            <% else %>
            
            <h1>Admin control page</h1>
            <br>
            <p>This is where you can start new books and edit club settings and members.</p>
            <br><br>
            
            <%= button_to "Add book", new_club_book_path(:club_id => @club.id), :method => :get %>
            
            <br><br> 
            
            <h3><%= @club.users.count %> Members</h3>
            <%= button_to "Add member", new_club_member_path(:club_id => @club.id), :method => :get %>
            <div class="row">
                <% @club.users.each do |user| %>
                    <div class="col-lg-2 col-md-2 col-sm-3">
                        <div class="text-left">
                            <p style="margin-bottom: -2px"><%= user.username %></p>
                            
                            <% membership = @club.memberships.where(:user_id => user.id).first %>
                            <% if membership.admin %>
                                <strong>Admin</strong>
                            <% end %>
                            <p class="text-muted">Member since <%= time_ago_in_words(membership.created_at) %> ago.</p>
                            <%= button_to "Kick", club_member_path(:club_id => @club.id, :membership_id => membership.id), :method => :delete,
                                                    :confirm => "Are you sure you want to kick this person?" %>
                        </div>
                    </div>
                <% end %>
            </div>
        <% end %>
    </div>
</div>